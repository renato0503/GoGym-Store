<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoGym Store | Ultimate App</title>
    
    <!-- Fontes Premium -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800;900&family=Inter:wght@300;400;600;800&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <!-- √çcones FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- RESET E VARI√ÅVEIS GLOBAIS --- */
        :root {
            --bg-deep: #050505;
            --bg-card: #0f0f0f;
            --bg-glass: rgba(20, 20, 20, 0.85);
            
            --neon-yellow: #ccff00;
            --neon-glow: rgba(204, 255, 0, 0.25);
            --orange-alert: #ff5e00;
            --blue-tech: #00f2ff;
            
            --text-main: #ffffff;
            --text-muted: #888888;
            
            --border-dim: #222222;
            --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* App-like feel */
            height: 100vh;
            width: 100vw;
        }

        /* --- TIPOGRAFIA --- */
        h1, h2, h3, .brand-font {
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            font-weight: 900;
            letter-spacing: -0.5px;
        }

        .tech-font {
            font-family: 'Rajdhani', sans-serif;
            text-transform: uppercase;
        }

        /* --- UI COMPONENTS --- */
        .btn-neon {
            background: var(--neon-yellow);
            color: black;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 0 15px var(--neon-glow);
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
        }

        .btn-neon:active {
            transform: scale(0.96);
            box-shadow: 0 0 5px var(--neon-glow);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 12px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(5px);
            cursor: pointer;
        }

        .scarcity-badge {
            background: var(--orange-alert);
            color: white;
            font-size: 0.6rem;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 800;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 8px;
            box-shadow: 0 2px 10px rgba(255, 94, 0, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* --- HEADER --- */
        header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(180deg, rgba(5,5,5,0.9) 0%, rgba(5,5,5,0) 100%);
        }

        .logo-container h1 {
            font-size: 1.4rem;
            color: var(--neon-yellow);
            line-height: 1;
        }
        .logo-container span {
            display: block;
            font-size: 0.55rem;
            color: white;
            letter-spacing: 2px;
            font-weight: 500;
            margin-top: 4px;
        }

        .cart-trigger {
            position: relative;
            font-size: 1.2rem;
            color: white;
            background: rgba(255,255,255,0.1);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--orange-alert);
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 800;
        }

        /* --- HOME SCREEN (DASHBOARD) --- */
        #home-dashboard {
            height: 100%;
            overflow-y: auto;
            padding: 90px 20px 120px 20px;
            transition: var(--transition);
        }

        .welcome-card {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 1px solid var(--border-dim);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .welcome-card::after {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 100px; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(204,255,0,0.05));
        }

        .welcome-card h2 { font-size: 1.2rem; margin-bottom: 5px; }
        .welcome-card p { font-size: 0.8rem; color: var(--text-muted); max-width: 80%; }
        
        .eta-display {
            margin-top: 15px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            color: var(--neon-yellow);
            font-weight: 700;
        }

        /* GRID DE CATEGORIAS */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .cat-card {
            background: var(--bg-card);
            border-radius: 18px;
            padding: 25px 15px;
            text-align: center;
            border: 1px solid var(--border-dim);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .cat-card:active { transform: scale(0.98); background: #151515; }

        .cat-card i {
            font-size: 2rem;
            color: var(--neon-yellow);
            margin-bottom: 15px;
            display: block;
            text-shadow: 0 0 15px rgba(204,255,0,0.2);
        }

        .cat-card h3 { font-size: 0.75rem; letter-spacing: 1px; color: white; }
        .cat-card p { font-size: 0.6rem; color: var(--text-muted); margin-top: 5px; }

        /* --- FEED DE PRODUTOS (FULLSCREEN OVERLAY) --- */
        #product-feed-layer {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg-deep);
            z-index: 500;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
            display: flex;
            flex-direction: column;
        }

        #product-feed-layer.active { transform: translateY(0); }

        .feed-header {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            z-index: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
        }

        .btn-close-feed {
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px; height: 40px;
            display: flex; justify-content: center; align-items: center;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            backdrop-filter: blur(4px);
        }

        /* SCROLL SNAP CONTAINER */
        .snap-container {
            flex: 1;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        .product-slide {
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            position: relative;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        /* GRADIENTE DE LEITURA */
        .product-slide::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(0deg, #050505 10%, rgba(5,5,5,0.9) 35%, rgba(5,5,5,0.2) 60%, rgba(5,5,5,0.4) 100%);
        }

        .product-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px 20px 40px 20px;
            z-index: 10;
        }

        .p-title {
            font-size: 2rem;
            line-height: 0.95;
            margin-bottom: 10px;
            color: white;
            text-shadow: 0 5px 15px rgba(0,0,0,0.8);
        }

        .p-price {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.8rem;
            color: var(--neon-yellow);
            font-weight: 700;
            margin-bottom: 15px;
            display: block;
        }

        .p-desc {
            font-size: 0.9rem;
            color: #d0d0d0;
            margin-bottom: 25px;
            line-height: 1.5;
            max-width: 95%;
        }

        .actions-row {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 10px;
        }

        /* --- MODAL DE DETALHES --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: flex-end; /* Sheet style */
        }

        .modal-sheet {
            background: #151515;
            width: 100%;
            max-height: 85vh;
            border-radius: 25px 25px 0 0;
            padding: 30px 25px;
            border-top: 1px solid var(--neon-yellow);
            overflow-y: auto;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .spec-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #222;
        }
        .spec-label { color: var(--text-muted); font-size: 0.85rem; }
        .spec-value { color: white; font-weight: 600; font-size: 0.9rem; text-align: right; }

        /* --- CARRINHO (CART) --- */
        #cart-modal {
            z-index: 1100;
        }

        .cart-item {
            background: #222;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-item h4 { font-size: 0.9rem; margin-bottom: 4px; }
        .cart-item p { color: var(--neon-yellow); font-size: 0.8rem; }
        .remove-btn { color: #ff4444; font-size: 1.2rem; cursor: pointer; padding: 5px; }

        /* --- RODAP√â FIXO --- */
        .bottom-nav {
            position: fixed;
            bottom: 0; left: 0; width: 100%;
            background: #0a0a0a;
            border-top: 1px solid #222;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            z-index: 90;
        }
        .nav-item { text-align: center; opacity: 0.6; font-size: 0.7rem; color: white; }
        .nav-item.active { opacity: 1; color: var(--neon-yellow); }
        .nav-item i { font-size: 1.2rem; margin-bottom: 4px; display: block; }

    </style>
</head>
<body>

    <!-- Header Principal -->
    <header id="main-header">
        <div class="logo-container">
            <h1>GOGYM</h1>
            <span>ULTIMATE STORE</span>
        </div>
        <div class="cart-trigger" onclick="toggleCart()">
            <i class="fa-solid fa-bag-shopping"></i>
            <div class="cart-count" id="cart-counter">0</div>
        </div>
    </header>

    <!-- TELA INICIAL (DASHBOARD) -->
    <main id="home-dashboard">
        
        <div class="welcome-card">
            <span class="scarcity-badge">STATUS DA LOJA: ONLINE</span>
            <h2>SETUP DE ELITE EM 45 MIN</h2>
            <p>Log√≠stica expressa para Cuiab√° e V√°rzea Grande. O calor n√£o espera, seu treino tamb√©m n√£o.</p>
            <div class="eta-display">
                <i class="fa-solid fa-clock"></i> PE√áA AGORA, RECEBA AT√â <span id="eta-time">--:--</span>
            </div>
        </div>

        <h3 style="margin-bottom: 15px; font-size: 0.9rem; color: #666; padding-left: 5px;">DEPARTAMENTOS</h3>
        
        <div class="categories-grid">
            <div class="cat-card" onclick="openCategory('hidra')">
                <i class="fa-solid fa-bottle-water"></i>
                <h3>HIDRATA√á√ÉO TECH</h3>
                <p>MagSafe, T√©rmicas & Vidro</p>
            </div>
            
            <div class="cat-card" onclick="openCategory('forca')">
                <i class="fa-solid fa-dumbbell"></i>
                <h3>FOR√áA BRUTA</h3>
                <p>Belts, Straps & Sleeves</p>
            </div>
            
            <div class="cat-card" onclick="openCategory('acessorios')">
                <i class="fa-solid fa-masks-theater"></i> <!-- Usando √≠cone gen√©rico para gear -->
                <i class="fa-solid fa-backpack" style="margin-top:-25px; display:block;"></i>
                <h3>EQUIPAMENTOS</h3>
                <p>Mochilas, Grips & Caddy</p>
            </div>
            
            <div class="cat-card" onclick="openCategory('recovery')">
                <i class="fa-solid fa-snowflake"></i>
                <h3>RECOVERY</h3>
                <p>Gelo, Massagem & Prote√ß√£o</p>
            </div>

            <div class="cat-card" style="grid-column: span 2; background: linear-gradient(90deg, #1a1a1a, #0d0d0d);" onclick="toggleSupport()">
                <i class="fa-brands fa-whatsapp" style="display:inline; font-size: 1.2rem; margin-right: 10px;"></i>
                <span style="font-size: 0.8rem; font-weight: 700;">FALAR COM ESPECIALISTA</span>
            </div>
        </div>

        <div style="height: 50px;"></div> <!-- Espa√ßador -->
    </main>

    <!-- LAYER DO FEED DE PRODUTOS (OVERLAY) -->
    <div id="product-feed-layer">
        <div class="feed-header">
            <h3 id="feed-title" style="color:white; font-size:1rem;">CATEGORIA</h3>
            <div class="btn-close-feed" onclick="closeFeed()">
                <i class="fa-solid fa-chevron-down"></i>
            </div>
        </div>
        
        <div class="snap-container" id="feed-content">
            <!-- Produtos injetados via JS -->
        </div>
    </div>

    <!-- MODAL DE DETALHES T√âCNICOS -->
    <div class="modal-overlay" id="tech-modal" onclick="closeModal(event, 'tech-modal')">
        <div class="modal-sheet" onclick="event.stopPropagation()">
            <h2 id="modal-title" style="color:var(--neon-yellow); margin-bottom:20px;">NOME DO PRODUTO</h2>
            <p id="modal-desc" style="color:#ccc; margin-bottom:20px; font-size:0.9rem; line-height:1.6;"></p>
            
            <h4 class="tech-font" style="color:white; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:15px;">ESPECIFICA√á√ïES</h4>
            <div id="modal-specs">
                <!-- Specs injetadas -->
            </div>

            <button class="btn-neon" onclick="closeModal(null, 'tech-modal')" style="margin-top:30px; background:#333; color:white; box-shadow:none;">
                FECHAR FICHA
            </button>
        </div>
    </div>

    <!-- MODAL DO CARRINHO -->
    <div class="modal-overlay" id="cart-modal" onclick="closeModal(event, 'cart-modal')">
        <div class="modal-sheet" onclick="event.stopPropagation()">
            <h2 style="color:var(--neon-yellow); margin-bottom:10px;">SUA MOCHILA</h2>
            <p style="font-size:0.8rem; color:#888; margin-bottom:20px;">Itens reservados por 15 minutos.</p>
            
            <div id="cart-items-container" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                <!-- Itens do carrinho -->
                <p style="text-align:center; color:#555; padding: 20px;">Sua mochila est√° vazia.</p>
            </div>

            <div class="spec-row" style="border-top: 1px solid #333; border-bottom:none; margin-top:10px;">
                <span class="spec-label" style="font-size:1rem; color:white;">TOTAL ESTIMADO</span>
                <span class="spec-value" style="font-size:1.2rem; color:var(--neon-yellow);" id="cart-total">R$ 0,00</span>
            </div>

            <button class="btn-neon" onclick="finalizeCheckout()">
                <i class="fa-brands fa-whatsapp"></i> FINALIZAR COMPRA
            </button>
        </div>
    </div>

    <!-- NAVBAR INFERIOR (VISUAL) -->
    <div class="bottom-nav">
        <div class="nav-item active">
            <i class="fa-solid fa-store"></i>
            LOJA
        </div>
        <div class="nav-item">
            <i class="fa-solid fa-map-location-dot"></i>
            TRACKING
        </div>
        <div class="nav-item" onclick="toggleCart()">
            <i class="fa-solid fa-bag-shopping"></i>
            BAG
        </div>
    </div>

    <script>
        /* --- BANCO DE DADOS COMPLETO --- */
        /* Imagens reais puxadas do Unsplash Source com keywords espec√≠ficas para garantir qualidade */
        const DB = {
            hidra: [
                {
                    id: 'h1',
                    name: "GARRAFA MAGSAFE PRO",
                    price: 159.90,
                    desc: "A revolu√ß√£o dos treinos. Tampa com anel magn√©tico N52 forte o suficiente para segurar qualquer iPhone (ou Android com anel). Filme seus sets sem precisar de trip√©.",
                    imgKw: "black gym water bottle metal",
                    specs: { "Material": "A√ßo Inox 304", "Capacidade": "950ml", "T√©rmica": "24h Gelado / 12h Quente", "Compatibilidade": "MagSafe / Anel Universal" }
                },
                {
                    id: 'h2',
                    name: "SHAKER VORTEX ELETRIC",
                    price: 139.00,
                    desc: "Motor de 11.000 RPM integrado. Esque√ßa pelotas de whey. Cria um vortex que mistura suplementos e frutas macias em segundos. Bateria recarreg√°vel.",
                    imgKw: "protein shaker bottle electric",
                    specs: { "Motor": "11k RPM", "Bateria": "USB-C (30 usos)", "Material": "Tritan (BPA Free)", "Capacidade": "600ml" }
                },
                {
                    id: 'h3',
                    name: "GAL√ÉO T√âRMICO 2.5L",
                    price: 289.90,
                    desc: "O gigante de a√ßo. Parede dupla com isolamento a v√°cuo. √Ågua gelada o dia inteiro, mesmo se deixar no carro sob o sol de Cuiab√°.",
                    imgKw: "large black water jug gym",
                    specs: { "Isolamento": "V√°cuo Parede Dupla", "Al√ßa": "Paracord T√°tico", "Tampa": "Flip Anti-vazamento", "Peso Vazio": "800g" }
                },
                {
                    id: 'h4',
                    name: "COPO T√âRMICO DAILY",
                    price: 89.90,
                    desc: "Estilo Stanley, mas com a pegada GoGym. Preto fosco, logo a laser. Para caf√© pr√©-treino ou √°gua no escrit√≥rio.",
                    imgKw: "black thermal cup",
                    specs: { "Capacidade": "473ml", "Material": "A√ßo Inox 18/8", "Tampa": "Com abridor", "Cor": "Matte Black" }
                }
            ],
            forca: [
                {
                    id: 'f1',
                    name: "LEVER BELT 13MM",
                    price: 489.00,
                    desc: "O cinto definitivo. 13mm de espessura para suporte m√°ximo na lombar. Fivela de alavanca (Lever) em a√ßo inoxid√°vel cromado. Destrave em 1 segundo entre s√©ries.",
                    imgKw: "powerlifting belt black leather",
                    specs: { "Espessura": "13mm", "Material": "Couro Suede/Leg√≠timo", "Fivela": "A√ßo Cromado", "Garantia": "Vital√≠cia na alavanca" }
                },
                {
                    id: 'f2',
                    name: "STRAPS FIGURE 8",
                    price: 89.00,
                    desc: "Trava sua m√£o na barra. Diferente dos straps comuns, o Figure 8 elimina totalmente a necessidade de for√ßa de pegada. Foco 100% nas costas/pernas.",
                    imgKw: "weightlifting straps gym",
                    specs: { "Tipo": "Figure 8 (Loop Duplo)", "Material": "Algod√£o Heavy Duty", "Costura": "Refor√ßada em X", "Carga M√°x": "400kg" }
                },
                {
                    id: 'f3',
                    name: "JOELHEIRA NEOPRENE 7MM",
                    price: 199.00,
                    desc: "Compress√£o e calor para articula√ß√µes. Neoprene SBR de 7mm. Ideal para agachamento pesado e preven√ß√£o de les√µes.",
                    imgKw: "knee sleeves gym black",
                    specs: { "Espessura": "7mm", "Material": "Neoprene SBR", "Venda": "Par", "Design": "Ergon√¥mico 3D" }
                },
                {
                    id: 'f4',
                    name: "WRIST WRAPS PRO",
                    price: 79.90,
                    desc: "Munhequeira el√°stica r√≠gida. Estabilidade total para Supino e Desenvolvimento. Evite dores no pulso.",
                    imgKw: "wrist wraps powerlifting",
                    specs: { "Comprimento": "60cm", "Velcro": "Militar Largo", "El√°stico": "Alta Tens√£o", "Loop": "Ded√£o Refor√ßado" }
                }
            ],
            acessorios: [
                {
                    id: 'a1',
                    name: "MOCHILA TACTICAL 45L",
                    price: 379.00,
                    desc: "Espa√ßo para tudo. Abertura 180 graus (clamshell). Compartimento para t√™nis, notebook e marmitas. Velcro frontal para patches.",
                    imgKw: "tactical backpack black military",
                    specs: { "Volume": "45 Litros", "Tecido": "Oxford 900D (Imperme√°vel)", "Z√≠per": "Duplo Refor√ßado", "MOLLE": "Sistema frontal e lateral" }
                },
                {
                    id: 'a2',
                    name: "GYM CADDY MAGNETIC",
                    price: 119.00,
                    desc: "Organizador magn√©tico. Gruda no rack do agachamento ou m√°quina. Segura celular, chaves, fone e garrafa. Pare de jogar suas coisas no ch√£o sujo.",
                    imgKw: "gym magnetic phone holder",
                    specs: { "√çm√£s": "Neod√≠mio x2", "Material": "Silicone Antiderrapante", "Compat√≠vel": "Qualquer superf√≠cie met√°lica", "Tamanho": "Compacto" }
                },
                {
                    id: 'a3',
                    name: "GRIPS FIBRA DE CARBONO",
                    price: 145.00,
                    desc: "Para quem faz Cross ou barra fixa. Material sint√©tico estilo fibra de carbono que 'gruda' na barra. Protege a m√£o de calos abertos.",
                    imgKw: "gymnastics grips crossfit",
                    specs: { "Material": "Sint√©tico Carbon Fiber", "Furos": "Sem furos (Speed)", "Munhequeira": "Integrada", "Espessura": "2mm" }
                },
                {
                    id: 'a4',
                    name: "MAGN√âSIO L√çQUIDO",
                    price: 45.00,
                    desc: "Ader√™ncia sem sujeira. Seca em 10 segundos na m√£o. N√£o faz nuvem de p√≥ na academia.",
                    imgKw: "liquid chalk gym bottle",
                    specs: { "Volume": "200ml", "√Ålcool": "70%", "Dura√ß√£o": "Aprox. 100 treinos", "Res√≠duo": "M√≠nimo" }
                }
            ],
            recovery: [
                {
                    id: 'r1',
                    name: "TOALHA ICE-TECH",
                    price: 49.00,
                    desc: "Obrigat√≥rio em Cuiab√°. Tecido tecnol√≥gico que esfria 10¬∫C abaixo da temperatura ambiente quando molhado e agitado.",
                    imgKw: "cooling towel sports blue",
                    specs: { "Tamanho": "30x100cm", "Tecnologia": "Evapora√ß√£o Ativa", "Prote√ß√£o": "UV 50+", "Embalagem": "Pote com mosquet√£o" }
                },
                {
                    id: 'r2',
                    name: "PISTOLA MASSAGEADORA",
                    price: 299.00,
                    desc: "Soltura miofascial port√°til. 4 cabe√ßas e 6 velocidades. Alivia a dor muscular p√≥s-treino imediatamente.",
                    imgKw: "massage gun black muscle",
                    specs: { "Bateria": "2h Dura√ß√£o", "Velocidades": "6 N√≠veis", "Ru√≠do": "Silencioso (<45dB)", "Peso": "900g" }
                },
                {
                    id: 'r3',
                    name: "FOAM ROLLER GRID",
                    price: 89.00,
                    desc: "Rolo de libera√ß√£o com textura grid que simula o toque dos dedos. Essencial para coluna e pernas.",
                    imgKw: "foam roller black gym",
                    specs: { "N√∫cleo": "PVC R√≠gido", "Revestimento": "EVA Alta Densidade", "Suporte": "At√© 150kg", "Tamanho": "33cm" }
                }
            ]
        };

        /* --- L√ìGICA DO CARRINHO --- */
        let cart = [];

        function addToCart(productId, cat) {
            const product = DB[cat].find(p => p.id === productId);
            if(product) {
                cart.push(product);
                updateCartUI();
                
                // Feedback visual simples
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = "<i class='fa-solid fa-check'></i> NA MOCHILA";
                btn.style.background = "#fff";
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = "var(--neon-yellow)";
                }, 1500);
            }
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function updateCartUI() {
            const counter = document.getElementById('cart-counter');
            counter.innerText = cart.length;
            
            // Anima√ß√£o do contador
            counter.style.transform = "scale(1.2)";
            setTimeout(() => counter.style.transform = "scale(1)", 200);

            // Renderizar lista no modal
            const container = document.getElementById('cart-items-container');
            container.innerHTML = "";
            let total = 0;

            if(cart.length === 0) {
                container.innerHTML = "<p style='text-align:center; color:#555; padding: 20px;'>Sua mochila est√° vazia.</p>";
            } else {
                cart.forEach((item, index) => {
                    total += item.price;
                    container.innerHTML += `
                        <div class="cart-item">
                            <div>
                                <h4>${item.name}</h4>
                                <p>R$ ${item.price.toFixed(2)}</p>
                            </div>
                            <div class="remove-btn" onclick="removeFromCart(${index})">
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>
                    `;
                });
            }
            document.getElementById('cart-total').innerText = "R$ " + total.toFixed(2);
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
        }

        /* --- L√ìGICA DA VITRINE (FEED) --- */
        function openCategory(catKey) {
            const feedLayer = document.getElementById('product-feed-layer');
            const feedContent = document.getElementById('feed-content');
            const feedTitle = document.getElementById('feed-title');
            
            // Define T√≠tulo
            const titles = { 'hidra': 'HIDRATA√á√ÉO TECH', 'forca': 'FOR√áA & POWER', 'acessorios': 'EQUIPAMENTOS', 'recovery': 'RECOVERY' };
            feedTitle.innerText = titles[catKey];

            // Renderiza Produtos
            feedContent.innerHTML = '';
            
            DB[catKey].forEach(item => {
                // Monta URL da imagem (usando Unsplash Source com keywords)
                // Usamos um parametro random para evitar cache igual para todos
                const imgUrl = `https://source.unsplash.com/1080x1920/?${encodeURIComponent(item.imgKw)}&sig=${item.id}`;
                
                // Monta HTML do Card
                const html = `
                    <section class="product-slide" style="background-image: url('${imgUrl}')">
                        <div class="product-content">
                            <span class="scarcity-badge">ESTOQUE CUIAB√Å: BAIXO</span>
                            <h2 class="p-title">${item.name}</h2>
                            <span class="p-price">R$ ${item.price.toFixed(2)}</span>
                            <p class="p-desc">${item.desc}</p>
                            
                            <div class="actions-row">
                                <button class="btn-outline" onclick="openTechSpecs('${catKey}', '${item.id}')">
                                    <i class="fa-solid fa-circle-info"></i>
                                </button>
                                <button class="btn-neon" onclick="addToCart('${item.id}', '${catKey}')">
                                    <i class="fa-solid fa-cart-plus"></i> ADICIONAR
                                </button>
                            </div>
                        </div>
                    </section>
                `;
                feedContent.innerHTML += html;
            });

            feedLayer.classList.add('active');
        }

        function closeFeed() {
            document.getElementById('product-feed-layer').classList.remove('active');
        }

        /* --- L√ìGICA DE DETALHES T√âCNICOS --- */
        function openTechSpecs(cat, id) {
            const product = DB[cat].find(p => p.id === id);
            const modal = document.getElementById('tech-modal');
            
            document.getElementById('modal-title').innerText = product.name;
            document.getElementById('modal-desc').innerText = product.desc;
            
            const specsContainer = document.getElementById('modal-specs');
            specsContainer.innerHTML = '';
            
            for (const [key, value] of Object.entries(product.specs)) {
                specsContainer.innerHTML += `
                    <div class="spec-row">
                        <span class="spec-label">${key}</span>
                        <span class="spec-value">${value}</span>
                    </div>
                `;
            }
            
            modal.style.display = 'flex';
        }

        function closeModal(e, id) {
            if(e && e.target.id !== id) return; // Se clicou fora
            document.getElementById(id).style.display = 'none';
        }

        /* --- FINALIZA√á√ÉO WHATSAPP --- */
        function finalizeCheckout() {
            if(cart.length === 0) {
                alert("Sua mochila est√° vazia!");
                return;
            }

            const phone = "5567993515206";
            let msg = "*NOVO PEDIDO - GOGYM APP*\n\n";
            let total = 0;
            
            cart.forEach(item => {
                msg += `‚ñ™ ${item.name} - R$ ${item.price.toFixed(2)}\n`;
                total += item.price;
            });
            
            msg += `\n*TOTAL: R$ ${total.toFixed(2)}*`;
            msg += `\n\n------------------------------`;
            msg += `\nüìç *Entrega:* Cuiab√°/VG`;
            msg += `\nüïí *ETA:* 45-60 min`;
            msg += `\n\nAguardo confirma√ß√£o do PIX!`;

            const link = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
            window.open(link, '_blank');
        }

        function toggleSupport() {
             window.open('https://wa.me/5567993515206?text=Ol√°, preciso de ajuda com um equipamento.', '_blank');
        }

        /* --- AUXILIARES --- */
        // Atualiza ETA (Hora atual + 45min)
        function updateTime() {
            const now = new Date();
            now.setMinutes(now.getMinutes() + 45);
            const timeStr = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
            document.getElementById('eta-time').innerText = timeStr;
        }
        setInterval(updateTime, 60000);
        updateTime();

    </script>
</body>
</html>
